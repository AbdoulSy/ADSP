{{define "charts"}}<h3>Project Completeness</h3><div id="chartsWrapper" class="demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid"><svg id="charts" class="demo-chart mdl-cell mdl-cell--4-col mdl-cell--3-col-desktop"></svg></div><style>.arc{stroke:#fff}</style><script>!function(){var t=100,a=d3.scaleOrdinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]),e=d3.arc().outerRadius(t).innerRadius(t-30),r=d3.pie().sort(null).value(function(t){return t.population});d3.csv("http://localhost:8080/public/data/project.csv",function(n,c){if(n)throw n;a.domain(d3.keys(c[0]).filter(function(t){return"Project"!==t})),c.forEach(function(t){t.ages=a.domain().map(function(a){return{name:a,population:+t[a]}})});var l=d3.select("#charts").attr("class","legend").attr("width",2*t).attr("height",2*t).selectAll("g").data(a.domain().slice().reverse()).enter().append("g").attr("transform",function(t,a){return"translate(0,"+20*a+")"});l.append("rect").attr("width",18).attr("height",18).style("fill",a),l.append("text").attr("x",24).attr("y",9).attr("dy",".35em").text(function(t){return t});var d=d3.select("#chartsWrapper").selectAll(".pie").data(c).enter().append("svg").attr("class","pie").attr("width",2*t).attr("height",2*t).append("g").attr("transform","translate("+t+","+t+")");d.selectAll(".arc").data(function(t){return r(t.ages)}).enter().append("path").attr("class","arc").attr("d",e).style("fill",function(t){return a(t.data.name)}),d.append("text").attr("dy",".35em").style("text-anchor","middle").text(function(t){return t.Project})})}()</script>{{end}}